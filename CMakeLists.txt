cmake_minimum_required(VERSION 2.6)
 
PROJECT(otus0)

SET(OTUS_VERSION_MAJOR "1")
SET(OTUS_VERSION_MINOR "0")
SET(OTUS_VERSION_PATCH "0")

configure_file ("${PROJECT_SOURCE_DIR}/include/otus0.h.in" "${PROJECT_BINARY_DIR}/include/otus0.h")
include_directories("${PROJECT_BINARY_DIR}")

ADD_EXECUTABLE(otus0 src/otus0.cpp)
INSTALL(TARGETS otus0 DESTINATION bin)
 
SET(CPACK_GENERATOR "DEB")
SET(CPACK_DEBIAN_PACKAGE_MAINTAINER "none")
SET(CPACK_PACKAGE_VERSION_MAJOR ${OTUS_VERSION_MAJOR})
SET(CPACK_PACKAGE_VERSION_MINOR ${OTUS_VERSION_MINOR})
SET(CPACK_PACKAGE_VERSION_PATCH ${OTUS_VERSION_PATCH})
EXECUTE_PROCESS(COMMAND "uname" "-m" OUTPUT_VARIABLE PKG_MACH)
string(STRIP ${PKG_MACH} CPACK_SYSTEM_NAME)

INCLUDE(CPack)
